import{d as c}from"./QBtn.f206f5ac.js";import{Q as p}from"./QPage.afff0bbd.js";import{_}from"./plugin-vue_export-helper.21dcd24c.js";import{I as a,J as h,K as u,W as d,Q as n,X as r,L as m}from"./index.73007e6c.js";import"./render.9e5626b2.js";const v={data(){return{videoStream:null,photoTaken:!1,photoUrl:""}},mounted(){this.startCamera()},beforeUnmount(){this.videoStream&&this.videoStream.getTracks().forEach(e=>e.stop())},methods:{startCamera(){navigator.mediaDevices.getUserMedia({video:!0}).then(e=>{this.videoStream=e,this.$refs.videoElement.srcObject=e}).catch(e=>{console.error("Error al acceder a la c\xE1mara: ",e)})},resetPhoto(){this.photoTaken=!1,this.startCamera()},takePhoto(){const e=this.$refs.videoElement,t=this.$refs.canvas,i=t.getContext("2d");t.width=e.videoWidth,t.height=e.videoHeight,i.drawImage(e,0,0,t.width,t.height);const l=t.toDataURL("image/png");this.photoTaken=!0,this.photoUrl=l,e.srcObject.getTracks().forEach(o=>o.stop())},savePhoto(){const e=document.createElement("a");e.href=this.photoUrl,e.download="foto.png",e.click()}}},f={class:"camera-container",ref:"cameraContainer"},k={key:0,ref:"videoElement",autoplay:"",playsinline:"",class:"camera-video"},g=["src"],y={ref:"canvas",style:{display:"none"}},C={key:0,class:"q-pa-none q-gutter-x-md row items-center justify-evenly"};function P(e,t,i,l,o,s){return a(),h(p,{class:"flex flex-center"},{default:u(()=>[d("div",f,[o.photoTaken?r("",!0):(a(),n("video",k,null,512)),o.photoTaken?(a(),n("img",{key:1,src:o.photoUrl,alt:"Foto tomada",class:"camera-photo"},null,8,g)):r("",!0),o.photoTaken?r("",!0):(a(),h(c,{key:2,label:"Tomar Foto",color:"primary",onClick:s.takePhoto},null,8,["onClick"])),d("canvas",y,null,512)],512),o.photoTaken?(a(),n("div",C,[m(c,{label:"Sacar Otra",color:"primary",onClick:s.resetPhoto},null,8,["onClick"]),m(c,{label:"Guardar Foto",color:"primary",onClick:s.savePhoto},null,8,["onClick"])])):r("",!0)]),_:1})}var w=_(v,[["render",P],["__scopeId","data-v-25fd300c"]]);export{w as default};
